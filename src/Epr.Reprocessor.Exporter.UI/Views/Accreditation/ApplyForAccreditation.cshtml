@using Epr.Reprocessor.Exporter.UI.App.Constants
@using Epr.Reprocessor.Exporter.UI.Extensions
@model Epr.Reprocessor.Exporter.UI.ViewModels.Accreditation.ApplyForAccreditationViewModel
@{
    ViewData["Title"] = Localizer["ApplyForAccreditationPageTitle"];
}


<a class="govuk-back-link govuk-link govuk-link--no-visited-state" data-testid="back-link" asp-route="PagePath.SelectPrnTonnage">@SharedLocalizer["Back"]</a>




<div class="govuk-width-container">
    <main class="govuk-main-wrapper govuk-!-padding-top-4" id="main-content" role="main">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">


                <h1 id="heading" class="govuk-heading-l">@Localizer["heading"]</h1>

                @foreach (var status in Model.Statuses)
                {

                    <table class="govuk-table" aria-describedby="heading">
                        <caption  class="govuk-table__caption govuk-table__caption--m" data-testid="@status.ReprocessorAddress">Reprocesser registrations for:  @status.ReprocessorAddress</caption>
                        <thead class="govuk-table__head">
                            <tr class="govuk-table__row">
                                <th scope="col" class="govuk-table__header">@Localizer["material"]</th>
                                <th scope="col" class="govuk-table__header">@Localizer["registration-status"]</th>
                                <th scope="col" class="govuk-table__header govuk-visually-hidden">Apply</th>
                            </tr>
                        </thead>
                        <tbody>

                            @foreach (var material in status.Status)
                            {
                                <tr class="govuk-table__row">

                                    <td class="govuk-table__cell" data-testid="@material.Key">
                                        @material.Key

                                    </td>
                                    <td class="govuk-table__cell">

                                        <div class="govuk-task-list__status" id="company-details-2-status">
                                            <strong asp-registration-status-colour="@material.Value" class="govuk-tag  @material.Value.GetDisplayName()" data-testid="@material.Value.GetDisplayName()">
                                                @material.Value.GetDisplayName()
                                            </strong>
                                        </div>
                                    </td>
                                    <td class="govuk-table__cell">
                                        <a class="govuk-link govuk-link govuk-link--no-visited-state" asp-controller="@PagePaths.AccreditationLanding" asp-action="@PagePaths.ApplyForAccreditation" data-testid="apply">
                                            @Localizer["apply"]
                                        </a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
            </div>
        </div>
    </main>
</div>